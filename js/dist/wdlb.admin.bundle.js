(()=>{document.addEventListener("DOMContentLoaded",(function(){e(),t(),n()}));const e=()=>{const e=document.getElementById("select_image");e&&e.addEventListener("click",(function(e){e.preventDefault();const t=wp.media({title:"Choisir une image",library:{type:"image"},button:{text:"Sélectionner"},multiple:!1});t.on("select",(function(){const e=t.state().get("selection").first().toJSON();document.getElementById("image_url").value=e.url;const n=document.getElementById("image_id");n&&(n.value=e.id),document.getElementById("image_preview").innerHTML='<img src="'+e.url+'" width="50" height="50" alt="">'})),t.open()}))},t=()=>{const e=document.getElementById("select_document_url");e&&e.addEventListener("click",(function(e){e.preventDefault();const t=wp.media({title:"Choisir un document",library:{type:["application/pdf","image/jpeg","image/png"]},button:{text:"Sélectionner"},multiple:!1});t.on("select",(function(){const e=t.state().get("selection").first().toJSON(),n=e.url.replace(".pdf","-pdf.jpg"),i=document.getElementById("document_id");i&&(i.value=e.id),document.getElementById("document_url").value=e.url,document.getElementById("document_url_preview").innerHTML='<a href="'+e.url+'" target="_blank"><img src="'+n+'" width="50" height="50" alt=""></a>'})),t.open()}))},n=()=>{var e=document.getElementById("toggleLinkField");if(e){var t=document.getElementById("toggleDocField"),n=document.getElementById("toggleFields");e.classList.toggle("hidden"),n.addEventListener("click",(function(){if(e.classList.contains("hidden"))e.classList.toggle("hidden"),t.classList.toggle("hidden"),document.getElementById("document_url").value="",n.innerText="Encoder une ressource";else{const i=document.getElementById("link");t.classList.toggle("hidden"),e.classList.toggle("hidden"),i.value="",n.innerText="Encoder un lien"}}))}}})();